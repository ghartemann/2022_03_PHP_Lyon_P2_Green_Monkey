{% extends 'layout.html.twig' %}

{% block title %}
	{{parent()}}
	- Stats
{% endblock %}

{% block content %}

	<main class="mainStatsContainer flex-column d-flex align-items-center">
		<div class="pageTitleContainer">
			<h1 class="pageTitle pt-5 pt-lg-20 text-center">Statistiques</h1>
		</div>
		<div class="container-fluid statsContainer">
			<div id="sumAnswers">
				<h2 class="display-2">Nombre de réponses</h2>
				<p class="statsTitle">{{ total.increment }}</p>
			</div>
			<div id="globalAverage d-flex">
				<h2 class="display-2">Total des émissions</h2>
				<p class="statsTitle">{{ (total.sum /1000) | round(2, 'common') | number_format(2, ',', ' ') }}
					t (eq. CO2)</p>
			</div>
			<div id="globalAverage d-flex">
				<h2 class="display-2">Moyenne générale</h2>
				<p class="statsTitle">{{ (totalAvg /1000) | round(2, 'common') | number_format(2, ',', ' ') }}
					t (eq. CO2)</p>
			</div>
			<div id="averageByCategory">
				<h2 class="display-2">Moyenne par catégorie</h2>

				<canvas id="myChart"></canvas>

				<p id="food" class="d-none">{{ totalCatArray[0]}}</p>
				<p id="accommodation" class="d-none">{{ totalCatArray[1]}}</p>
				<p id="transport" class="d-none">{{ totalCatArray[2]}}</p>
				<p id="digital" class="d-none">{{ totalCatArray[3]}}</p>

			</div>
		</div>
	</main>
{% endblock %}

{% block javascript %}
	{{parent()}}
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
	<script type="text/javascript" src="../assets/js/stats.js"></script>
{% endblock %}
